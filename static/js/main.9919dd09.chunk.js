(this["webpackJsonpsocial-media-app"]=this["webpackJsonpsocial-media-app"]||[]).push([[0],{30:function(e,t,s){},37:function(e,t,s){"use strict";s.r(t);var c=s(0),n=s.n(c),a=s(23),r=s.n(a),l=(s(30),s(4)),o=s(5),i=s(2),d=s(6),u=s(3),j=s(11),b=s(1),x=function(e){var t=e.text,s=e.bg,c=e.className,n=e.Icon,a=Object(j.a)(e,["text","bg","className","Icon"]);return Object(b.jsxs)("button",Object(u.a)(Object(u.a)({},a),{},{className:" ".concat(s||"bg-purple-600"," text-white font-medium text-sm px-3 py-1 rounded focus:ring flex items-center ").concat(c),children:[n," ",t]}))},h=function(e){var t=e.type,s=e.placeholder,c=Object(j.a)(e,["type","placeholder"]);return Object(b.jsx)("input",Object(u.a)(Object(u.a)({},c),{},{className:"rounded-l px-3 py-1 bg-gray-700 text-white ring-1 focus:ring outline-none focus:bg-black",type:t,placeholder:s}))},m={showReg:!1,activeReg:"Sign Up",user:null,fetchPosts:!1},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,s=t.type,c=t.payload;switch(s){case"TOGGLE_REG":return Object(u.a)(Object(u.a)({},e),{},{showReg:!e.showReg});case"SET_ACTIVE_REG":return Object(u.a)(Object(u.a)({},e),{},{activeReg:c});case"SET_USER":return Object(u.a)(Object(u.a)({},e),{},{user:c});case"FETCH_POSTS":return Object(u.a)(Object(u.a)({},e),{},{fetchPosts:!e.fetchPosts});default:return e}},O=Object(c.createContext)(f),p=function(e){var t=e.children,s=Object(c.useReducer)(f,m),n=Object(i.a)(s,2),a=n[0],r=n[1];return Object(b.jsx)(O.Provider,{value:{state:a,dispatch:r},children:t})},g=function(){return Object(c.useContext)(O)},v=function(e){var t=e.setShowUserToggle,s=g(),c=s.dispatch,n=s.state.user;return Object(b.jsxs)("div",{className:"absolute top-full right-2 w-60 border-2 border-t-0 border-black border-opacity-20 z-40 bg-gray-900 p-5 rounded-b-lg",children:[Object(b.jsx)(l.b,{to:"/".concat(null===n||void 0===n?void 0:n.username),children:Object(b.jsxs)("div",{className:"flex justify-start space-x-3 items-center",children:[Object(b.jsx)("img",{className:"w-11 h117 rounded",src:null===n||void 0===n?void 0:n.photo,alt:""}),Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:"text-sm font-semibold",children:(null===n||void 0===n?void 0:n.displayName)||(null===n||void 0===n?void 0:n.username)}),Object(b.jsxs)("p",{className:"text-xs font-light",children:["@",null===n||void 0===n?void 0:n.username]})]})]})}),Object(b.jsx)("div",{className:"w-full h-0.5 bg-gray-500 my-7"}),Object(b.jsx)(l.b,{to:"/profile/edit",children:Object(b.jsxs)("button",{className:"flex p-2 hover:bg-gray-800 w-full rounded justify-start items-center space-x-2",children:[Object(b.jsx)(d.c,{className:"w-6"}),Object(b.jsx)("span",{children:"Settings"})]})}),Object(b.jsx)(l.b,{to:"/communities",children:Object(b.jsxs)("button",{className:"flex p-2 hover:bg-gray-800 w-full rounded justify-start items-center space-x-2",children:[Object(b.jsx)(d.j,{className:"w-6"}),Object(b.jsx)("span",{children:"Communities"})]})}),Object(b.jsx)("div",{className:"w-full h-0.5 bg-gray-500 my-7"}),Object(b.jsxs)("button",{onClick:function(){t(!1),c({type:"SET_USER",payload:null}),localStorage.removeItem("stackmedia_token")},className:"flex p-2 hover:bg-gray-800 w-full rounded justify-start items-center space-x-2",children:[Object(b.jsx)(d.f,{className:"w-6"}),Object(b.jsx)("span",{children:"Logout"})]})]})},y=function(e){var t=e.setShowSearchResults,s=e.searchUsers;return Object(b.jsxs)("div",{className:"w-full flex flex-col space-y-7 p-5 z-50 bg-black ring-1 rounded-b text-white absolute  top-full mt-2 inset-x-0 mx-auto",children:[null===s||void 0===s?void 0:s.map((function(e,s){return Object(b.jsx)(l.b,{to:"/".concat(null===e||void 0===e?void 0:e.username),children:Object(b.jsxs)("div",{onClick:function(){return t(!1)},className:"flex space-x-2 items-center justify-start",children:[Object(b.jsx)("img",{alt:"",src:null===e||void 0===e?void 0:e.photo,className:"w-8 h-8 rounded-full bg-white"}),Object(b.jsx)("p",{children:(null===e||void 0===e?void 0:e.displayName)||(null===e||void 0===e?void 0:e.username)})]})},s)})),Object(b.jsx)("button",{onClick:function(){return t(!1)},className:"px-3 py-1 bg-red-500 rounded focus:ring",children:"Close"})]})},N=function(){var e=g(),t=e.dispatch,s=e.state.user,n=function(e){t({type:"TOGGLE_REG"}),t({type:"SET_ACTIVE_REG",payload:e.target.innerText})},a=Object(c.useState)(!1),r=Object(i.a)(a,2),o=r[0],u=r[1],j=Object(c.useState)(!1),m=Object(i.a)(j,2),f=m[0],O=m[1],p=Object(c.useState)([]),N=Object(i.a)(p,2),w=N[0],S=N[1],A=Object(c.useState)(""),E=Object(i.a)(A,2),C=E[0],k=E[1];Object(c.useEffect)((function(){f||k("")}),[f]);return Object(b.jsxs)("header",{className:"relative h-header  border-b-2 border-black border-opacity-20 bg-gray-900 flex items-center justify-between px-10",children:[Object(b.jsxs)(l.b,{to:"/",className:"bg-white px-2 py-0.5 rounded flex items-center justify-center",children:[Object(b.jsx)("span",{className:"text-lg font-semibold text-blue-700",children:"stack"}),Object(b.jsx)("span",{style:{marginTop:"2.5px"},className:"text-sm font-semibold text-black",children:"MEDIA"})]}),Object(b.jsxs)("div",{className:"flex relative",children:[Object(b.jsx)(h,{type:"search",value:C,placeholder:"Search",onChange:function(e){var t=e.target.value;k(t),t.length>0?O(!0):O(!1),fetch("/user/search/".concat(t),{method:"get"}).then((function(e){return e.json()})).then((function(e){S(e.users)})).catch(console.log)}}),Object(b.jsx)("button",{className:"py-1 ring-1 focus:ring px-2 ml-1 rounded-r bg-gray-600 ",children:Object(b.jsx)(d.h,{className:"w-5 text-white"})}),f&&Object(b.jsx)(y,{setShowSearchResults:O,searchUsers:w})]}),Object(b.jsx)("div",{className:"flex items-center space-x-2",children:s?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(x,{Icon:Object(b.jsx)(d.l,{className:"w-3 mr-1"}),text:"Communities"}),Object(b.jsx)("button",{onClick:function(){return u((function(e){return!e}))},className:"p-1 rounded-full hover:bg-gray-800",children:Object(b.jsx)(d.k,{className:"w-5 text-white"})})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(x,{onClick:n,text:"Sign In",bg:"bg-gray-500"}),Object(b.jsx)(x,{onClick:n,text:"Sign Up"})]})}),o&&Object(b.jsx)(v,{setShowUserToggle:u})]})},w=function(e){var t=e.text,s=e.activeReg,c=e.dispatch;return Object(b.jsx)("button",{onClick:function(){return c({type:"SET_ACTIVE_REG",payload:t})},style:{marginBottom:"-1.5px"},className:"".concat(s===t?"":"border-transparent"," border-b-2 pb-1"),children:t})},S=function(){var e=g(),t=e.state.activeReg,s=e.dispatch;return Object(b.jsxs)("header",{children:[Object(b.jsx)("h1",{className:"text-center text-lg font-semibold py-5",children:"Sign Up"===t?Object(b.jsxs)(b.Fragment,{children:["Join",Object(b.jsxs)("span",{className:"bg-white text-black mx-1 px-2 rounded",children:[Object(b.jsx)("span",{className:"text-blue-500",children:"stack"}),"media"]}),"Today"]}):Object(b.jsxs)(b.Fragment,{children:["Signin",Object(b.jsxs)("span",{className:"bg-white text-black mx-1 px-2 rounded",children:[Object(b.jsx)("span",{className:"text-blue-500",children:"stack"}),"media"]})]})}),Object(b.jsxs)("div",{className:"border-b text-sm font-semibold border-gray-500 flex justify-start space-x-5",children:[Object(b.jsx)(w,{activeReg:t,dispatch:s,text:"Sign In"}),Object(b.jsx)(w,{activeReg:t,dispatch:s,text:"Sign Up"})]})]})},A=function(e){var t=e.type,s=e.placeholder,c=e.name,n=e.notLabel,a=e.error,r=e.onChange,l=Object(j.a)(e,["type","placeholder","name","notLabel","error","onChange"]);return Object(b.jsxs)("div",{className:"w-full",children:[!n&&Object(b.jsx)("label",{className:"capitalize mb-1 text-xs font-medium mt-3 inline-block",htmlFor:c,children:c}),Object(b.jsx)("input",Object(u.a)(Object(u.a)({},l),{},{onChange:r,className:"rounded px-3 w-full py-1 bg-gray-700 text-white ring-1 focus:ring outline-none focus:bg-black",type:t,name:c,id:c,placeholder:s})),Object(b.jsx)("small",{className:"text-red-400 text-xs",children:a})]})};function E(e){var t=e.handleInput,s=Object(c.useState)(""),n=Object(i.a)(s,2),a=n[0],r=n[1],l=Object(c.useState)(""),o=Object(i.a)(l,2),d=o[0],u=o[1];return Object(b.jsxs)("div",{className:"relative overflow-hidden flex justify-start space-x-5 items-center my-5",children:["Uploading..."===d?Object(b.jsx)("div",{className:"w-14 h-14 rounded-full bg-gray-500 animate-pulse"}):Object(b.jsx)("img",{className:"w-14 h-14 rounded-full object-cover object-center",src:a||"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAHgAA/+EDKmh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8APD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMjEgNzkuMTU0OTExLCAyMDEzLzEwLzI5LTExOjQ3OjE2ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEMThCRkM0QUEzRTkxMUVCODEyQ0MwNTg2ODk0MkU4RCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEMThCRkM0OUEzRTkxMUVCODEyQ0MwNTg2ODk0MkU4RCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTYzMjlGNzQwNzgxMTFFQkJFMEVBRDM1MTdBOEYzODkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTYzMjlGNzUwNzgxMTFFQkJFMEVBRDM1MTdBOEYzODkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAQCwsLDAsQDAwQFw8NDxcbFBAQFBsfFxcXFxcf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",alt:""}),Object(b.jsxs)("p",{className:"relative",children:[Object(b.jsxs)("span",{children:[Object(b.jsx)("span",{className:"ring-1 px-3 py-1",children:"Choose"})," Your Profile Picture"]}),Object(b.jsx)("small",{className:"absolute left-0  top-full text-gray-300 items-start justify-center",children:Object(b.jsx)("small",{className:"-mb-3",children:d||"or drag & drop here"})})]}),Object(b.jsx)("input",{type:"file",onChange:function(e){var s=e.target.files[0];if(s){u("Uploading...");var c=new FormData;return c.append("file",s),c.append("upload_preset","stackmedia"),fetch("https://api.cloudinary.com/v1_1/dq1i37rxi/image/upload",{method:"POST",body:c}).then((function(e){return e.json()})).then((function(e){t(null,e.secure_url),console.log("see cloudinary data ",e);var c=new FileReader;c.readAsDataURL(s),c.onload=function(e){r(e.target.result)},u("Upload Complete.")})).catch((function(e){u(e.message)}))}},className:"w-full h-full opacity-0 absolute inset-0 cursor-pointer",accept:"image/*"})]})}var C=s(13),k=function(e,t){return function(){var s=g().dispatch,n=Object(c.useState)({}),a=Object(i.a)(n,2),r=a[0],l=a[1],o=Object(c.useState)(""),d=Object(i.a)(o,2),j=d[0],x=d[1],h=Object(c.useState)({}),m=Object(i.a)(h,2),f=m[0],O=m[1],p=Object(c.useState)(!1),v=Object(i.a)(p,2),y=v[0],N=v[1];return Object(b.jsx)(e,{error:j,errors:f,loading:y,handleInput:function(e,t){if(t&&l((function(e){return Object(u.a)(Object(u.a)({},e),{},{photo:t})})),e){var s=e.target,c=s.name,n=s.value;n.length<0?O((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(C.a)({},c,"required!"))})):O((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(C.a)({},c,null))})),l((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(C.a)({},c,n))}))}},handleForm:function(e){N(!0),e.preventDefault(),fetch("https://stacksocial-backend.herokuapp.com".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(u.a)({},r))}).then((function(e){return e.json()})).then((function(e){!function(e){N(!1),(null===e||void 0===e?void 0:e.errors)?O(e.errors):(null===e||void 0===e?void 0:e.error)?x(e.error):(localStorage.setItem("stackmedia_token",e.token),s({type:"TOGGLE_REG"}),s({type:"SET_USER",payload:e.user}))}(e)})).catch((function(e){return console.log(e)}))}})}},I=function(e){var t=e.text,s=e.loading;return Object(b.jsxs)("button",{type:"submit",className:"w-full py-1 bg-gray-600 focus:ring rounded relative",children:[t,s&&Object(b.jsx)("span",{style:{borderTopColor:"transparent"},className:"border-4 w-5 h-5 rounded-full block animate-spin absolute inset-y-0 right-5 my-auto"})]})},T=k((function(e){var t=e.handleForm,s=e.handleInput,c=(e.error,e.errors),n=e.loading;return Object(b.jsxs)("form",{onSubmit:t,children:[Object(b.jsx)(E,{handleInput:s}),Object(b.jsx)(A,{error:null===c||void 0===c?void 0:c.username,onChange:s,type:"text",name:"username"}),Object(b.jsx)(A,{error:null===c||void 0===c?void 0:c.email,onChange:s,type:"email",name:"email"}),Object(b.jsx)(A,{error:null===c||void 0===c?void 0:c.password,onChange:s,type:"password",name:"password"}),Object(b.jsx)(A,{error:null===c||void 0===c?void 0:c.confirmPassword,onChange:s,type:"password",name:"confirmPassword"}),Object(b.jsxs)("p",{className:"text-xs my-3",children:["By clicking Sign Up, you are indicating that you have read and acknowledge",Object(b.jsx)("span",{className:"text-blue-400 mx-1 cursor-pointer",children:"the Terms of Service"}),"and",Object(b.jsx)("span",{className:"text-blue-400 mx-1 cursor-pointer",children:"Privacy Notice"})]}),Object(b.jsx)(I,{text:"Sign up",loading:n})]})}),"/user/signup"),R=k((function(e){var t=e.handleInput,s=e.handleForm,c=e.error,n=(e.errors,e.loading);return Object(b.jsxs)("form",{onSubmit:s,children:[Object(b.jsx)("small",{className:"text-red-400 mt-3 block",children:c&&c}),Object(b.jsx)(A,{onChange:t,type:"text",name:"username"}),Object(b.jsx)(A,{onChange:t,type:"password",name:"password"}),Object(b.jsx)("a",{href:"/",className:"my-3 inline-block text-xs text-blue-400",children:"Forgot Password"}),Object(b.jsx)(I,{text:"Sign in",loading:n})]})}),"/user/signin"),P=function(e){var t=e.dispatch;return Object(b.jsx)("button",{className:"absolute right-2 top-2 cursor-pointer hover:bg-red-500 rounded-full",onClick:function(){return t({type:"TOGGLE_REG"})},children:Object(b.jsx)(d.m,{className:"w-7"})})},z=function(){var e=g(),t=e.state.activeReg,s=e.dispatch;return Object(b.jsx)("div",{className:"fixed z-50 inset-0 m-auto items-center overflow-y-auto justify-center bg-black bg-opacity-50",children:Object(b.jsxs)("div",{className:"w-96 p-5 mx-auto my-10 rounded bg-gray-800 text-white relative",children:[Object(b.jsx)(P,{dispatch:s}),Object(b.jsx)(S,{}),"Sign Up"===t?Object(b.jsx)(T,{}):Object(b.jsx)(R,{})]})})},U=function(){return Object(b.jsx)("svg",{viewBox:"0 0 24 24",focusable:"false",className:"w-6",fill:"#fff",children:Object(b.jsx)("g",{children:Object(b.jsx)("path",{d:"M18.77,11h-4.23l1.52-4.94C16.38,5.03,15.54,4,14.38,4c-0.58,0-1.14,0.24-1.52,0.65L7,11H3v10h4h1h9.43 c1.06,0,1.98-0.67,2.19-1.61l1.34-6C21.23,12.15,20.18,11,18.77,11z M7,20H4v-8h3V20z M19.98,13.17l-1.34,6 C18.54,19.65,18.03,20,17.43,20H8v-8.61l5.6-6.06C13.79,5.12,14.08,5,14.38,5c0.26,0,0.5,0.11,0.63,0.3 c0.07,0.1,0.15,0.26,0.09,0.47l-1.52,4.94L13.18,12h1.35h4.23c0.41,0,0.8,0.17,1.03,0.46C19.92,12.61,20.05,12.86,19.98,13.17z"})})})},B=function(e){var t=e.saved;return Object(b.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6",fill:"".concat(t?"#6e87f5":"#fff"),children:Object(b.jsx)("g",{className:"style-scope yt-icon",children:Object(b.jsx)("path",{d:"M22,13h-4v4h-2v-4h-4v-2h4V7h2v4h4V13z M14,7H2v1h12V7z M2,12h8v-1H2V12z M2,16h8v-1H2V16z"})})})},M=function(){return Object(b.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6",fill:"#fff",children:Object(b.jsx)("g",{children:Object(b.jsx)("path",{d:"M17,4h-1H6.57C5.5,4,4.59,4.67,4.38,5.61l-1.34,6C2.77,12.85,3.82,14,5.23,14h4.23l-1.52,4.94C7.62,19.97,8.46,21,9.62,21 c0.58,0,1.14-0.24,1.52-0.65L17,14h4V4H17z M10.4,19.67C10.21,19.88,9.92,20,9.62,20c-0.26,0-0.5-0.11-0.63-0.3 c-0.07-0.1-0.15-0.26-0.09-0.47l1.52-4.94l0.4-1.29H9.46H5.23c-0.41,0-0.8-0.17-1.03-0.46c-0.12-0.15-0.25-0.4-0.18-0.72l1.34-6 C5.46,5.35,5.97,5,6.57,5H16v8.61L10.4,19.67z M20,13h-3V5h3V13z"})})})},V=function(e){var t=e.w;return Object(b.jsx)("svg",{viewBox:"0 0 24 24",className:"".concat(t||"w-6"),fill:"#9899ff",children:Object(b.jsx)("g",{children:Object(b.jsx)("path",{d:"M3,11h3v10H3V11z M18.77,11h-4.23l1.52-4.94C16.38,5.03,15.54,4,14.38,4c-0.58,0-1.14,0.24-1.52,0.65L7,11v10h10.43 c1.06,0,1.98-0.67,2.19-1.61l1.34-6C21.23,12.15,20.18,11,18.77,11z"})})})},F=function(e){var t=e.w;return Object(b.jsx)("svg",{viewBox:"0 0 24 24",className:"".concat(t||"w-6"),fill:"#9899ff",children:Object(b.jsx)("g",{children:Object(b.jsx)("path",{d:"M18,4h3v10h-3V4z M5.23,14h4.23l-1.52,4.94C7.62,19.97,8.46,21,9.62,21c0.58,0,1.14-0.24,1.52-0.65L17,14V4H6.57 C5.5,4,4.59,4.67,4.38,5.61l-1.34,6C2.77,12.85,3.82,14,5.23,14z"})})})},H=function(e){var t=e.post,s=g(),n=s.dispatch,a=s.state.user,r=Object(c.useState)(a.savedPosts.includes(t._id)),l=Object(i.a)(r,2),o=l[0],d=l[1],u=function(e,t){fetch("/post/".concat(e),{method:"put",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("stackmedia_token")},body:JSON.stringify({_id:t})}).then((function(e){return e.json()})).then((function(e){n({type:"FETCH_POSTS"})})).catch((function(e){return console.log(e)}))};return Object(b.jsxs)("div",{className:"flex space-x-5 transform text-xs text-gray-200",children:[Object(b.jsxs)("button",{onClick:function(){return u("like",null===t||void 0===t?void 0:t._id)},className:"flex space-x-1 items-center",children:[(null===t||void 0===t?void 0:t.likes.indexOf(a._id))>-1?Object(b.jsx)(V,{}):Object(b.jsx)(U,{}),Object(b.jsx)("span",{children:null===t||void 0===t?void 0:t.likes.length})]}),Object(b.jsxs)("button",{onClick:function(){return u("dislike",null===t||void 0===t?void 0:t._id)},className:"flex space-x-1 items-center",children:[(null===t||void 0===t?void 0:t.dislikes.indexOf(a._id))>-1?Object(b.jsx)(F,{}):Object(b.jsx)(M,{}),Object(b.jsx)("span",{children:null===t||void 0===t?void 0:t.dislikes.length})]}),Object(b.jsxs)("button",{onClick:function(){fetch("/user/savePost",{method:"put",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("stackmedia_token")},body:JSON.stringify({postID:t._id})}).then((function(e){return e.json()})).then((function(e){e.doc.savedPosts.includes(t._id)?(d(!0),console.log("saved")):(d(!1),console.log("unsaved")),n({type:"FETCH_POSTS"})})).catch(console.log)},className:"flex space-x-1 items-center ".concat(o&&"text-blue-300"),children:[Object(b.jsx)(B,{saved:o}),Object(b.jsx)("span",{children:o?"Saved":"Save"})]})]})},D=function(e){var t=e.post,s=t.thumbnail,c=t.body;return Object(b.jsxs)("div",{className:"py-6 flex flex-col space-y-3",children:[Object(b.jsx)("div",{children:c}),Object(b.jsx)("img",{className:"w-full rounded",src:s,alt:""})]})},L=function(e){var t=e.Icon,s=e.text,c=e.setShowOptions,n=e.onClick;return Object(b.jsxs)("button",{onClick:function(e){c(!1),n&&n(e)},className:"flex space-x-2 hover:bg-gray-500 focus:ring-1 p-3  text-left",children:[Object(b.jsx)(t,{className:"w-4"})," ",Object(b.jsx)("span",{children:s})]})},G=function(e){var t=e.post,s=e.setShowEdit,n=t.postedBy,a=g(),r=a.dispatch,o=a.state.user,u=Object(c.useState)(!1),j=Object(i.a)(u,2),x=j[0],h=j[1];return Object(b.jsxs)("div",{className:"flex justify-between relative",children:[Object(b.jsx)(l.b,{to:"/".concat(null===n||void 0===n?void 0:n.username),children:Object(b.jsxs)("div",{className:"flex space-x-3",children:[Object(b.jsx)("img",{className:"w-8 h-8 rounded-full",src:null===n||void 0===n?void 0:n.photo,alt:""}),Object(b.jsx)("p",{className:"text-gray-300",children:null===n||void 0===n?void 0:n.username})]})}),Object(b.jsx)("button",{onClick:function(){return h((function(e){return!e}))},className:"w-6 h-6 flex items-center justify-center rounded-full hover:bg-gray-700 focus:ring",children:Object(b.jsx)(d.d,{className:"w-5"})}),x&&Object(b.jsx)("div",{className:"flex flex-col text-xs rounded-sm bg-gray-700 ring-1 absolute right-0 top-8",children:o._id===n._id?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(L,{setShowOptions:h,onClick:function(){return e=t._id,void fetch("/post/delete",{method:"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:e})}).then((function(e){return e.json()})).then((function(e){r({type:"FETCH_POSTS"})})).catch((function(e){return console.log(e)}));var e},Icon:d.i,text:"Delete Post"}),Object(b.jsx)(L,{setShowOptions:h,onClick:function(){return s(!0)},Icon:d.g,text:"Edit Post"})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(L,{setShowOptions:h,Icon:d.a,text:"Block"}),Object(b.jsx)(L,{setShowOptions:h,Icon:d.e,text:"Not Interested"})]})})]})},J=function(e){var t=e.post,s=e.showEdit,n=e.setShowEdit,a=Object(c.useState)(null===t||void 0===t?void 0:t.body),r=Object(i.a)(a,2),l=r[0],o=r[1],d=Object(c.useState)(!1),u=Object(i.a)(d,2),j=u[0],x=u[1],h=g().dispatch;return Object(b.jsx)("div",{className:"".concat(s?"flex":"hidden"," w-full z-50 bg-opacity-30 h-full items-center justify-center p-4 rounded  fixed inset-0 bg-black"),children:Object(b.jsxs)("div",{className:"w-96 p-4 rounded bg-gray-600",children:[Object(b.jsx)("textarea",{value:l,onChange:function(e){o(e.target.value)},className:"outline-none bg-gray-700 focus:ring-2 ring-1 p-2 rounded h-32 w-full"}),Object(b.jsxs)("div",{className:"flex justify-between",children:[Object(b.jsx)("button",{onClick:function(){return n(!1)},className:"flex items-center justify-evenly space-x-3 px-3 mt-4 py-1 bg-pink-500 text-white rounded outline-none focus:ring",children:"Cencel"}),Object(b.jsxs)("button",{onClick:function(){return e=t._id,x(!0),void fetch("post/update",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:e,body:l})}).then((function(e){return e.json()})).then((function(e){h({type:"FETCH_POSTS"}),n(!1),x(!1)})).catch((function(e){h({type:"FETCH_POSTS"}),n(!1),x(!1)}));var e},className:"flex items-center justify-evenly space-x-3 px-3 mt-4  py-1 bg-blue-500 text-white rounded outline-none focus:ring",children:[Object(b.jsx)("span",{children:"Update"}),j&&Object(b.jsx)("span",{style:{borderTopColor:"transparent"},className:"border-4 w-5 h-5 rounded-full animate-spin"})]})]})]})})},Q=s(18),Z=function(e){var t,s,c=e.username,n=e.reply;return Object(b.jsxs)("div",{className:"flex space-x-2 ml-8",children:[Object(b.jsx)(l.b,{to:"/".concat(c),children:Object(b.jsx)("img",{src:null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.photo,className:"w-8 h-8 rounded-full ring-1",alt:""})}),Object(b.jsxs)("div",{className:"w-44 h-auto bg-gray-700 px-2 py-1",children:[Object(b.jsx)(l.b,{to:"/".concat(c),children:Object(b.jsx)("p",{className:"text-sm text-blue-300 hover:underline",children:null===n||void 0===n||null===(s=n.user)||void 0===s?void 0:s.username})}),Object(b.jsxs)("p",{className:"text-xs p-1",children:[Object(b.jsxs)("span",{className:"py-0.5 px-1 rounded bg-blue-600",children:["@",c]})," ",null===n||void 0===n?void 0:n.body]})]})]})},_=function(e){var t=e.comment,s=t.body,n=t.user,a=t._id,r=Object(c.useRef)(),o=Object(c.useRef)(),d=Object(c.useState)(!1),j=Object(i.a)(d,2),x=j[0],h=j[1],m=Object(c.useState)(""),f=Object(i.a)(m,2),O=f[0],p=f[1],g=Object(c.useState)([]),v=Object(i.a)(g,2),y=v[0],N=v[1];Object(c.useEffect)((function(){fetch("/post/replies/".concat(a),{method:"get"}).then((function(e){return e.json()})).then((function(e){N(e.replies)})).catch(console.log)}),[a]);var w=function(e){e.preventDefault(),fetch("/post/reply",{method:"put",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("stackmedia_token")},body:JSON.stringify({_id:a,text:O})}).then((function(e){return e.json()})).then((function(e){setTimeout((function(){h(!1)}),500),o.current.focus(),p(""),N((function(t){return[].concat(Object(Q.a)(t),[Object(u.a)({},e.reply)])}))})).catch(console.log)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"flex items-start space-x-2",children:[Object(b.jsx)(l.b,{to:"/".concat(null===n||void 0===n?void 0:n.username),children:Object(b.jsx)("img",{src:null===n||void 0===n?void 0:n.photo,alt:"",className:"w-8 h-8 rounded-full cursor-pointer"})}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"bg-gray-500 bg-opacity-20 px-2 py-1 rounded",children:[Object(b.jsx)(l.b,{to:"/".concat(null===n||void 0===n?void 0:n.username),children:Object(b.jsx)("p",{className:"font-semibold text-sm cursor-pointer text-blue-300 hover:underline",children:null===n||void 0===n?void 0:n.username})}),Object(b.jsx)("p",{className:"text-xs font-medium p-1",children:s})]}),Object(b.jsxs)("div",{className:"w-full flex justify-center",children:[Object(b.jsx)("button",{className:"text-xs font-semibold hover:underline",children:"Like"}),Object(b.jsx)("button",{onClick:function(){h((function(e){return!e})),setTimeout((function(){var e;null===(e=r.current)||void 0===e||e.focus()}),50)},className:"text-xs font-semibold hover:underline mx-3",children:"Reply"}),Object(b.jsx)("small",{children:"6h"})]})]})]}),y.map((function(e){return Object(b.jsx)(Z,{username:null===n||void 0===n?void 0:n.username,reply:e},e._id)})),x&&Object(b.jsxs)("form",{onSubmit:w,children:[Object(b.jsx)("input",{ref:r,value:O,onChange:function(e){return p(e.target.value)},placeholder:"your reply...",className:"p-2 ml-5 mr-2 bg-gray-600 text-xs focus:bg-gray-700 rounded focus:ring outline-none"}),Object(b.jsx)("button",{ref:o,type:"submit",onClick:w,className:"p-2 text-xs rounded outline-none focus:ring bg-gray-700",children:"Reply"})]})]})},X=function(e){var t=e.comments;return Object(b.jsxs)("div",{className:"flex flex-col space-y-3 mt-5",children:[null===t||void 0===t?void 0:t.map((function(e,t){return Object(b.jsx)(_,{comment:e},t)})),Object(b.jsxs)("div",{className:"flex justify-between w-full pt-5 text-xs",children:[Object(b.jsx)("p",{className:"cursor-pointer hover:underline",children:"View more comments..."}),Object(b.jsx)("p",{children:"1 of 99"})]})]})},W=function(e){var t=e.addComment,s=Object(c.useRef)(),n=g().state.user;return Object(b.jsxs)("div",{className:"flex mt-9 mb-2",children:[Object(b.jsx)("img",{src:null===n||void 0===n?void 0:n.photo,alt:"",className:"w-7 h-7 rounded-full"}),Object(b.jsxs)("form",{className:"flex w-full mx-3 space-x-3",onSubmit:function(e){return t(e,s)},children:[Object(b.jsx)("input",{name:"",className:"rounded w-full outline-none text-xs bg-gray-800 ring-1 focus:ring-2 p-2 flex items-center",placeholder:"write a comment..."}),Object(b.jsx)("button",{ref:s,type:"submit",className:"outline-none text-xs px-3 py-1 rounded bg-gray-500 focus:ring",children:"Comment"})]})]})},Y=function(e){var t=e.postID,s=g().dispatch,n=Object(c.useState)([]),a=Object(i.a)(n,2),r=a[0],l=a[1];Object(c.useEffect)((function(){var e=!0;return fetch("/post/comments/".concat(t),{method:"get",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("stackmedia_token")}}).then((function(e){return e.json()})).then((function(t){e&&l(null===t||void 0===t?void 0:t.comments)})).catch((function(e){return console.log("error ",e)})),function(){return e=!1}}),[t]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(W,{addComment:function(e,c){e.preventDefault();var n=e.target[0].value;n&&(c.current.focus(),fetch("/post/comment",{method:"put",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("stackmedia_token")},body:JSON.stringify({_id:t,text:n})}).then((function(e){return e.json()})).then((function(e){l((function(t){return[].concat(Object(Q.a)(t),[e.comment])})),s({type:"FETCH_POSTS"})})).catch((function(e){return console.log(e)})),e.target[0].value="")}}),Object(b.jsx)(X,{comments:r})]})},q=function(e){var t=e.post,s=Object(c.useState)(!1),n=Object(i.a)(s,2),a=n[0],r=n[1];return Object(b.jsxs)("div",{style:{background:"#222222"},className:"mx-auto p-5 w-full relative",children:[Object(b.jsx)(G,{setShowEdit:r,post:t}),Object(b.jsx)(D,{post:t}),Object(b.jsx)(H,{post:t}),Object(b.jsx)(J,{post:t,showEdit:a,setShowEdit:r}),Object(b.jsx)(Y,{postID:null===t||void 0===t?void 0:t._id})]})},K=function(){var e=g().state.user;return Object(b.jsxs)("div",{className:"w-96 hidden lg:block h-full overflow-y-auto p-10",style:{background:"#141214"},children:[Object(b.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[Object(b.jsx)("img",{className:"w-14 h-14 rounded-full object-cover",src:null===e||void 0===e?void 0:e.photo,alt:""}),Object(b.jsx)("p",{children:null===e||void 0===e?void 0:e.username}),Object(b.jsx)(l.b,{to:"/".concat(null===e||void 0===e?void 0:e.username),children:Object(b.jsx)("button",{className:"outline-none focus:ring ring-1 px-5 my-4 py-1 hover:bg-blue-500 rounded-full",children:"View Profile"})})]}),Object(b.jsx)("div",{children:Object(b.jsx)("h1",{className:"text-gray-400 border-b-2 border-gray-400 py-1 text-center",children:"Your Recent Activities"})})]})},$=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{className:"text-sm font-medium text-gray-300 text-center border-b-2 py-1 tracking-widest border-gray-500",children:"Your Community"}),Object(b.jsxs)("div",{className:"flex items-start justify-start space-x-3 py-3",children:[Object(b.jsx)("div",{className:"w-6 h-6 rounded-full bg-gray-500 ring"}),Object(b.jsxs)("div",{className:"relative",children:[Object(b.jsx)("p",{className:"text-sm",children:" The Tech "}),Object(b.jsx)("button",{className:"text-xs absolute left-0 -bottom-4",children:"View"})]})]}),Object(b.jsxs)("div",{className:"flex items-start justify-start space-x-3 py-3",children:[Object(b.jsx)("div",{className:"w-6 h-6 rounded-full bg-gray-500 ring"}),Object(b.jsxs)("div",{className:"relative",children:[Object(b.jsx)("p",{className:"text-sm truncate overflow-ellipsis ",children:"Programming Challenges"}),Object(b.jsx)("button",{className:"text-xs absolute left-0 -bottom-4",children:"View"})]})]})]})},ee=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{className:"text-sm font-medium text-gray-300 text-center border-b-2 py-1 tracking-widest border-gray-500",children:"Suggessted To Join"}),Object(b.jsxs)("div",{className:"flex items-start justify-start space-x-3 py-3",children:[Object(b.jsx)("div",{className:"w-6 h-6 rounded-full bg-gray-500 ring"}),Object(b.jsxs)("div",{className:"relative",children:[Object(b.jsx)("p",{className:"text-sm",children:" The Tech "}),Object(b.jsx)("button",{className:"text-xs absolute left-0 -bottom-4",children:"Join+"})]})]}),Object(b.jsxs)("div",{className:"flex items-start justify-start space-x-3 py-3",children:[Object(b.jsx)("div",{className:"w-6 h-6 rounded-full bg-gray-500 ring"}),Object(b.jsxs)("div",{className:"relative",children:[Object(b.jsx)("p",{className:"text-sm truncate overflow-ellipsis ",children:"Programming Challenges"}),Object(b.jsx)("button",{className:"text-xs absolute left-0 -bottom-4",children:"Join+"})]})]})]})},te=function(){return Object(b.jsxs)("div",{className:"w-80 hidden md:block h-full p-5",style:{background:"#14111b"},children:[Object(b.jsx)($,{}),Object(b.jsx)("br",{}),Object(b.jsx)(ee,{})]})},se=s(16);function ce(){var e=g(),t=e.dispatch,s=e.state.user,n=Object(c.useState)(!1),a=Object(i.a)(n,2),r=a[0],o=a[1],u=Object(c.useState)(""),j=Object(i.a)(u,2),x=j[0],h=j[1],m=Object(c.useState)(""),f=Object(i.a)(m,2),O=f[0],p=f[1],v=Object(c.useState)(""),y=Object(i.a)(v,2),N=y[0],w=y[1],S=Object(c.useRef)(),A=Object(c.useRef)(),E=Object(c.useState)(""),C=Object(i.a)(E,2),k=C[0],I=C[1];return Object(b.jsx)("section",{style:{background:"#242526"},className:"p-5 rounded-lg",children:Object(b.jsxs)("div",{className:"items-start flex space-x-5 ",children:[Object(b.jsx)(l.b,{to:null===s||void 0===s?void 0:s.username,children:Object(b.jsx)("img",{className:"w-9 h-9 rounded-full",src:s.photo,alt:""})}),Object(b.jsxs)("div",{className:"w-full",children:[Object(b.jsxs)("form",{onSubmit:function(e){console.log(N),e.preventDefault(),o(!0),fetch("/post/new",{method:"post",headers:{authorization:localStorage.getItem("stackmedia_token"),"Content-Type":"application/json"},body:JSON.stringify({body:O,thumbnail:N})}).then((function(e){return e.json()})).then((function(e){p(""),h(""),o(!1),t({type:"FETCH_POSTS"})})).catch((function(e){console.log(e)}))},className:"w-full",children:[Object(b.jsx)("textarea",{onChange:function(e){return p(e.target.value)},value:O,ref:A,placeholder:"what's on your mind?",className:"h-20 p-2 text-sm rounded w-full outline-none bg-gray-800 ring-1 focus:ring-2 focus:bg-gray-900"}),Object(b.jsxs)("div",{className:"flex justify-between mt-5",children:[Object(b.jsxs)("button",{onClick:function(){return S.current.click()},type:"button",className:"px-4 py-2 bg-gray-700 flex items-center justify-evenly hover:border-1 focus:ring rounded",children:[Object(b.jsx)(d.b,{className:"w-5 mr-3"}),"Add Thumbnail"]}),Object(b.jsx)("input",{ref:S,type:"file",hidden:!0,onChange:function(e){var t=e.target.files[0];if(t){I("Uploading...");var s=new FormData;return s.append("file",t),s.append("upload_preset","stackmedia"),fetch("https://api.cloudinary.com/v1_1/dq1i37rxi/image/upload",{method:"POST",body:s}).then((function(e){return e.json()})).then((function(e){I("Upload Complete."),w(e.secure_url);var s=new FileReader;s.readAsDataURL(t),s.onload=function(e){h(e.target.result)}})).catch((function(e){I(e.message)}))}}}),Object(b.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-gray-700 flex items-center justify-evenly focus:ring rounded",children:["Post",r&&Object(b.jsx)("span",{style:{borderTopColor:"transparent"},className:"border-4 w-5 h-5 ml-3 rounded-full block animate-spin"})]})]})]}),k&&Object(b.jsx)("h1",{className:"my-2 text-sm",children:k}),x&&Object(b.jsxs)("div",{className:"relative mt-5",children:[Object(b.jsx)("img",{className:"rounded",src:x,alt:""}),Object(b.jsx)(se.c,{onClick:function(){I(""),h(null)},className:"w-12 h-12 absolute left-0 cursor-pointer top-0 text-red-600 transform group-hover:shadow-2xl",fill:"#fff"})]})]})]})})}var ne=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),s=t[0],n=t[1],a=g().state.fetchPosts;return Object(c.useEffect)((function(){fetch("/post/all",{method:"get",authorization:"Bearer "+localStorage.getItem("stackmedia_token")}).then((function(e){return e.json()})).then((function(e){return n(e.posts)})).catch((function(e){return console.log(e)}))}),[a]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(K,{}),Object(b.jsxs)("div",{className:"w-full h-full flex flex-col space-y-10 overflow-y-auto p-10",children:[Object(b.jsx)(ce,{}),s.map((function(e){return Object(b.jsx)(q,{post:e},e._id)}))]}),Object(b.jsx)(te,{})]})},ae=function(){var e=g().dispatch,t=function(){e({type:"TOGGLE_REG"})};return Object(b.jsxs)("div",{className:"flex flex-col items-center space-y-5 justify-center",children:[Object(b.jsxs)("p",{children:["Please",Object(b.jsx)("button",{className:"mx-1 font-semibold underline text-blue-300",onClick:function(){t(),e({type:"SET_ACTIVE_REG",payload:"Sign Up"})},children:"Join"}),"or",Object(b.jsx)("button",{className:"mx-1 font-semibold underline text-blue-300",onClick:function(){t(),e({type:"SET_ACTIVE_REG",payload:"Sign In"})},children:"Signin"}),"to explore ",Object(b.jsx)("b",{children:"NewsFeed"})]}),Object(b.jsx)("button",{onClick:t,className:"text-white border-2 border-white bg-gray-800 hover:bg-gray-200 px-4 py-2 rounded focus:ring hover:text-black",children:"Join Now"})]})},re=function(){var e=g().state.user;return Object(b.jsx)("div",{className:"full flex justify-center items-center h-minus_header  overflow-y-auto",children:e?Object(b.jsx)(ne,{}):Object(b.jsx)(ae,{})})},le=function(e){var t=e.authUser,s=e.profileUser,n=e.isLoggedInUser,a=e.dispatch,r=Object(c.useState)(!1),o=Object(i.a)(r,2),u=o[0],j=o[1];Object(c.useEffect)((function(){n||j(null===s||void 0===s?void 0:s.followers.includes(null===t||void 0===t?void 0:t._id))}),[s,n,t]);return Object(b.jsxs)("div",{className:"flex items-start justify-center space-x-5 bg-gray-800 p-8 rounded-b-lg",children:[Object(b.jsx)("div",{className:"w-10 h-10 ring-4 rounded-full overflow-hidden",children:Object(b.jsx)("img",{className:"w-full h-full object-cover object-center ",src:null===s||void 0===s?void 0:s.photo,alt:""})}),Object(b.jsxs)("div",{className:"flex flex-col space-y-5 w-80",children:[Object(b.jsxs)("div",{className:"flex justify-between space-x-5",children:[Object(b.jsx)("h3",{className:"font-semibold",children:(null===s||void 0===s?void 0:s.displayName)||(null===s||void 0===s?void 0:s.username)}),n?Object(b.jsx)(l.b,{to:"/profile/edit",children:Object(b.jsx)(x,{bg:"bg-pink-500",text:"Edit Profile"})}):u?Object(b.jsx)(x,{bg:"bg-blue-500",onClick:function(){fetch("/user/unfollow",{method:"put",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("stackmedia_token")},body:JSON.stringify({followID:s._id})}).then((function(e){return e.json()})).then((function(){a({type:"FETCH_POSTS"})})).catch(console.log)},text:"Unfollow"}):Object(b.jsx)(x,{bg:"bg-blue-500",onClick:function(){fetch("/user/follow",{method:"put",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("stackmedia_token")},body:JSON.stringify({followID:s._id})}).then((function(e){return e.json()})).then((function(){a({type:"FETCH_POSTS"})})).catch(console.log)},text:"Follow"})]}),Object(b.jsxs)("div",{className:"flex justify-between space-x-5 ",children:[Object(b.jsxs)("p",{className:"flex",children:["Posts",Object(b.jsx)("b",{className:"ml-1 font-medium text-blue-300 cursor-pointer",children:null===s||void 0===s?void 0:s.posts.length})]}),Object(b.jsxs)("p",{className:"flex",children:["Followers",Object(b.jsx)("b",{className:"ml-1 font-medium text-blue-300 cursor-pointer",children:null===s||void 0===s?void 0:s.followers.length})]}),Object(b.jsxs)("p",{className:"flex",children:["Following",Object(b.jsx)("b",{className:"ml-1 font-medium text-blue-300 cursor-pointer",children:null===s||void 0===s?void 0:s.following.length})]})]}),Object(b.jsxs)("p",{className:"text-sm font-normal flex",children:[(null===s||void 0===s?void 0:s.bio)||"Biodata",n&&Object(b.jsx)(l.b,{to:"/profile/edit",children:Object(b.jsx)(d.g,{className:"ml-1 w-3"})})]})]})]})},oe=function(e){var t,s,c,n,a=e.post;return Object(b.jsxs)("div",{className:"w-full bg-gray-800 p-5",children:[Object(b.jsx)("p",{className:"overflow-hidden ",children:a.body}),Object(b.jsxs)("div",{className:"flex justify-start space-x-5 mt-5",children:[Object(b.jsxs)("div",{className:"flex items-center space-x-1",children:[Object(b.jsx)(V,{w:"w-4"}),Object(b.jsxs)("small",{children:[" ",null===a||void 0===a||null===(t=a.likes)||void 0===t?void 0:t.length," "]})]}),Object(b.jsxs)("div",{className:"flex items-center space-x-1",children:[Object(b.jsx)(F,{w:"w-4"}),Object(b.jsxs)("small",{children:[" ",null===a||void 0===a||null===(s=a.dislikes)||void 0===s?void 0:s.length," "]})]}),Object(b.jsxs)("div",{className:"flex items-center space-x-1",children:[Object(b.jsx)(se.a,{className:"w-4 text-blue-400"}),Object(b.jsxs)("small",{children:[" ",null===a||void 0===a||null===(c=a.comments)||void 0===c?void 0:c.length," "]})]}),Object(b.jsxs)("div",{className:"flex items-center space-x-1",children:[Object(b.jsx)(se.b,{className:"w-4 text-blue-400"}),Object(b.jsxs)("small",{children:[" ",(null===a||void 0===a||null===(n=a.share)||void 0===n?void 0:n.length)||0," "]})]})]})]})},ie=function(e){var t=e.showPosts,s=e.savedPosts,n=e.profileUser,a=Object(c.useState)([]),r=Object(i.a)(a,2),l=r[0],o=r[1];return Object(c.useEffect)((function(){var e=!0;return fetch("/post/userPosts/".concat(n._id),{method:"get"}).then((function(e){return e.json()})).then((function(t){e&&(o(t.posts),setTimeout((function(){e=!1}),100))})),function(){e=!1}}),[l,n]),Object(b.jsxs)("div",{className:"grid grid-cols-1 mt-5 md:grid-cols-2 lg:grid-cols-3 gap-10 px-12 2xl:max-w-screen-xl mx-auto",children:["Posts"===t&&(null===l||void 0===l?void 0:l.map((function(e){return Object(b.jsx)(oe,{post:e},e._id)}))),"Saved"===t&&(null===s||void 0===s?void 0:s.map((function(e){return Object(b.jsx)(oe,{post:e},e._id)})))]})},de=function(e){var t=g(),s=t.dispatch,n=t.state,a=n.user,r=n.fetchPosts,l=Object(o.g)().username,d=Object(c.useState)(),u=Object(i.a)(d,2),j=u[0],x=u[1],h=Object(c.useState)(!0),m=Object(i.a)(h,2),f=m[0],O=m[1],p=Object(c.useState)(!1),v=Object(i.a)(p,2),y=v[0],N=v[1],w=Object(c.useState)("Posts"),S=Object(i.a)(w,2),A=S[0],E=S[1],C=Object(c.useState)([]),k=Object(i.a)(C,2),I=k[0],T=k[1];Object(c.useEffect)((function(){(null===a||void 0===a?void 0:a._id)===(null===j||void 0===j?void 0:j._id)?N(!0):N(!1)}),[a,j]),Object(c.useEffect)((function(){fetch("/user/".concat(l),{method:"get"}).then((function(e){return e.json()})).then((function(e){var t=e.user;T(t.savedPosts),O(!1),x(t)})).catch(console.log)}),[l,r]);var R=Object(c.useState)("posts"),P=Object(i.a)(R,2),z=P[0],U=P[1],B=function(e){return U(e.target.innerText.toLowerCase())};return f?Object(b.jsx)("div",{className:"w-full h-screen flex items-center justify-center",children:"Loading"}):j?Object(b.jsxs)("div",{className:"w-full pb-12 h-minus_header overflow-y-auto bg-gray-900",children:[Object(b.jsx)(le,{dispatch:s,authUser:a,profileUser:j,isLoggedInUser:y}),Object(b.jsxs)("div",{className:"w-full h-16 border-t border-gray-500 flex items-center justify-center space-x-5",children:[Object(b.jsx)("button",{onClick:function(e){B(e),E("Posts")},className:"px-2 py-0.5 rounded ".concat("posts"===z?"ring":""," bg-blue-500"),children:"Posts"}),y&&Object(b.jsx)("button",{onClick:function(e){B(e),E("Saved")},className:"px-2 py-0.5 rounded ".concat("saved"===z?"ring":""," bg-blue-500"),children:"Saved"})]}),Object(b.jsx)(ie,{savedPosts:I,showPosts:A,profileUser:j})]}):Object(b.jsx)("div",{className:"w-full h-screen flex items-center justify-center",children:"User Doesn't exist!"})},ue=function(e){var t=e.children;return Object(b.jsx)("div",{className:"w-80 text-right flex justify-end pr-3",children:t})},je=function(e){var t=e.children;return Object(b.jsx)("div",{className:"w-full flex flex-col items-start justify-center pl-3",children:t})},be=function(e){var t=e.children;return Object(b.jsx)("div",{className:"flex items-start justify-center",children:t})},xe=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),s=t[0],n=t[1],a=Object(c.useState)(""),r=Object(i.a)(a,2),l=r[0],o=r[1],d=Object(c.useState)("Change Password"),u=Object(i.a)(d,2),j=u[0],h=u[1];return Object(b.jsxs)("div",{className:"flex flex-col space-y-5",children:[Object(b.jsxs)(be,{children:[Object(b.jsx)(ue,{children:" Old Password "}),Object(b.jsx)(je,{children:Object(b.jsx)(A,{value:s,onChange:function(e){h("Change Password"),n(e.target.value)},type:"password"})})]}),Object(b.jsxs)(be,{children:[Object(b.jsx)(ue,{children:" New Password "}),Object(b.jsx)(je,{children:Object(b.jsx)(A,{value:l,onChange:function(e){h("Change Password"),o(e.target.value)},type:"password"})})]}),Object(b.jsxs)(be,{children:[Object(b.jsx)(ue,{children:" "}),Object(b.jsxs)(je,{children:[Object(b.jsx)(x,{onClick:function(){fetch("/user/changePassword",{method:"put",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("stackmedia_token")},body:JSON.stringify({oldPassword:s,newPassword:l})}).then((function(e){return e.json()})).then((function(e){e.error?alert(e.error):(console.log(e),h("Changed"))})).catch(console.log)},bg:"bg-blue-500",className:"py-2",text:j}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("a",{href:"/",children:"Forgot Password"})]})]})]})},he=function(){return Object(b.jsx)("div",{children:"Not Available"})},me=function(e){var t=e.children;return Object(b.jsx)("div",{className:"w-80 text-right flex justify-end pr-3",children:t})},fe=function(e){var t=e.children;return Object(b.jsx)("div",{className:"w-full flex flex-col items-start justify-center pl-3",children:t})},Oe=function(e){var t=e.children;return Object(b.jsx)("div",{className:"flex items-start justify-center",children:t})},pe=function(){var e=g(),t=e.dispatch,s=e.state.user,n=Object(c.useState)("Update"),a=Object(i.a)(n,2),r=a[0],l=a[1],o=Object(c.useState)(""),d=Object(i.a)(o,2),u=d[0],j=d[1],h=Object(c.useState)(""),m=Object(i.a)(h,2),f=m[0],O=m[1],p=Object(c.useState)(""),v=Object(i.a)(p,2),y=v[0],N=v[1],w=Object(c.useState)(""),S=Object(i.a)(w,2),E=S[0],C=S[1],k=Object(c.useState)(""),I=Object(i.a)(k,2),T=I[0],R=I[1];Object(c.useEffect)((function(){l("Update")}),[u,f,y,E,T]),Object(c.useEffect)((function(){j((null===s||void 0===s?void 0:s.username)||""),O((null===s||void 0===s?void 0:s.displayName)||""),N((null===s||void 0===s?void 0:s.email)||""),C((null===s||void 0===s?void 0:s.website)||""),R((null===s||void 0===s?void 0:s.bio)||"")}),[s]);return Object(b.jsxs)("div",{className:"flex flex-col space-y-5",children:[Object(b.jsxs)(Oe,{children:[Object(b.jsx)(me,{children:Object(b.jsx)("img",{className:"w-9 h-9 rounded-full object-cover object-center ",src:null===s||void 0===s?void 0:s.photo,alt:""})}),Object(b.jsxs)(fe,{children:[Object(b.jsx)("p",{className:"font-semibold",children:(null===s||void 0===s?void 0:s.displayName)||(null===s||void 0===s?void 0:s.username)}),Object(b.jsx)("button",{className:"font-medium text-xs text-blue-300 cursor-pointer",children:"Change Profile Photo"})]})]}),Object(b.jsxs)(Oe,{children:[Object(b.jsx)(me,{children:" Display Name "}),Object(b.jsx)(fe,{children:Object(b.jsx)(A,{onChange:function(e){return O(e.target.value)},type:"text",value:f})})]}),Object(b.jsxs)(Oe,{children:[Object(b.jsx)(me,{children:" Username "}),Object(b.jsxs)(fe,{children:[Object(b.jsx)(A,{onChange:function(e){return j(e.target.value)},type:"text",value:u}),Object(b.jsx)("small",{className:"w-42 my-3 text-gray-300",children:"In most cases, you'll be able to change your username back to for another 14 days."})]})]}),Object(b.jsxs)(Oe,{children:[Object(b.jsx)(me,{children:" Email "}),Object(b.jsxs)(fe,{children:[Object(b.jsx)(A,{type:"text",value:y,onChange:function(e){return N(e.target.value)}}),Object(b.jsx)(x,{bg:"bg-green-500",className:"text-xs mt-2",text:"Confirm Email"})]})]}),Object(b.jsxs)(Oe,{children:[Object(b.jsx)(me,{children:" Website "}),Object(b.jsx)(fe,{children:Object(b.jsx)(A,{type:"text",value:E,onChange:function(e){return C(e.target.value)}})})]}),Object(b.jsxs)(Oe,{children:[Object(b.jsx)(me,{children:" Bio "}),Object(b.jsx)(fe,{children:Object(b.jsx)("textarea",{onChange:function(e){return R(e.target.value)},value:T,className:"w-full h-32 bg-gray-700 focus:bg-black focus:ring outline-none p-3 rounded"})})]}),Object(b.jsxs)(Oe,{children:[Object(b.jsx)(me,{}),Object(b.jsx)(fe,{children:Object(b.jsx)("button",{onClick:function(){fetch("/user/update",{method:"put",headers:{"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("stackmedia_token")},body:JSON.stringify({displayName:f,username:u,website:E,email:y,bio:T})}).then((function(e){return e.json()})).then((function(e){var s=e.user;t({type:"SET_USER",payload:s}),l("Updated")})).catch(console.log)},className:"text-sm focus:ring font-normal py-2 px-3 rounded bg-blue-500",children:r})})]})]})},ge=function(e){var t=e.text,s=e.active,c=Object(j.a)(e,["text","active"]);return Object(b.jsx)("button",Object(u.a)(Object(u.a)({},c),{},{className:"border-l-4  ".concat(s===t?"text-blue-300 border-blue-300":"border-transparent"," text-left px-3"),style:{marginLeft:"-2.5px"},children:t}))},ve=function(){var e=Object(c.useState)("Edit Profile"),t=Object(i.a)(e,2),s=t[0],n=t[1];return Object(b.jsxs)("div",{style:{padding:"25px"},className:"flex min-h-minus_header",children:[Object(b.jsxs)("div",{className:"w-80 py-5 bg-gray-900 border border-gray-500 flex flex-col space-y-3",children:[Object(b.jsx)(ge,{onClick:function(e){return n(e.target.innerText)},active:s,text:"Edit Profile"}),Object(b.jsx)(ge,{onClick:function(e){return n(e.target.innerText)},active:s,text:"Change Password"}),Object(b.jsx)(ge,{onClick:function(e){return n(e.target.innerText)},active:s,text:"Activity"})]}),Object(b.jsxs)("div",{className:"border border-l-0 bg-gray-900 border-gray-500 overflow-y-auto w-full max-h-minus_header_dbl p-12",children:["Edit Profile"===s&&Object(b.jsx)(pe,{}),"Change Password"===s&&Object(b.jsx)(xe,{}),"Activity"===s&&Object(b.jsx)(he,{})]})]})},ye=function(e){var t=Object.assign({},e);return localStorage.getItem("stackmedia_token")?Object(b.jsx)(o.b,Object(u.a)({auth:!0},t)):Object(b.jsx)(o.a,{auth:!1,to:"/"})},Ne=function(){var e=g(),t=e.dispatch,s=e.state,n=s.showReg,a=s.user,r=s.fetchPosts;return Object(c.useEffect)((function(){var e=localStorage.getItem("stackmedia_token");!a&&e&&fetch("/user/getinfo",{method:"get",headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){t({type:"SET_USER",payload:e.user})})).catch((function(e){return alert("error ",e)}))}),[a,t,r]),Object(b.jsx)("div",{style:{background:"#100e17"},className:"text-white",children:Object(b.jsxs)(l.a,{basename:"/stacksocial",children:[Object(b.jsx)(N,{}),n&&Object(b.jsx)(z,{}),Object(b.jsxs)(o.d,{children:[Object(b.jsx)(o.b,{exact:!0,path:"/",component:re}),Object(b.jsx)(ye,{exact:!0,path:"/:username",component:de}),Object(b.jsx)(ye,{exact:!0,path:"/profile/edit",component:ve})]})]})})},we=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,38)).then((function(t){var s=t.getCLS,c=t.getFID,n=t.getFCP,a=t.getLCP,r=t.getTTFB;s(e),c(e),n(e),a(e),r(e)}))};r.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(p,{children:Object(b.jsx)(Ne,{})})}),document.getElementById("root")),we()}},[[37,1,2]]]);
//# sourceMappingURL=main.9919dd09.chunk.js.map